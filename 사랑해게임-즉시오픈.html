<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’• ì‚¬ë‘í•´ ê²Œì„ ğŸ’•</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 800px;
            width: 100%;
        }

        .title {
            font-size: 2.5rem;
            color: #e91e63;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
        }

        .game-mode-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .mode-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s;
            font-weight: bold;
        }

        .mode-btn:hover {
            transform: scale(1.05);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
        }

        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .choices {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .choice-btn {
            background: white;
            border: 3px solid #667eea;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 100px;
            font-weight: bold;
        }

        .choice-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .choice-btn:disabled {
            background: #ccc;
            border-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .result-area {
            margin: 30px 0;
            font-size: 1.3rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .love-message {
            font-size: 2rem;
            color: #e91e63;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
        }

        .reset-btn:hover {
            transform: scale(1.05);
        }

        .reset-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .flip-card {
            width: 60px;
            height: 90px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            margin: 5px;
        }

        .flip-card.flipped {
            transform: rotateY(180deg);
        }

        .flip-card.selected {
            border: 3px solid #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
            transform: rotateY(180deg);
        }

        .score-board {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .score-card {
            text-align: center;
            padding: 15px;
            color: white;
            border-radius: 15px;
            min-width: 150px;
        }

        .player1-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .player2-score {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
        }

        .tension-indicator {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(255, 107, 107, 0.5); }
            to { box-shadow: 0 0 20px rgba(255, 107, 107, 0.8); }
        }

        .revealed-card {
            background: linear-gradient(135deg, #4caf50 0%, #8bc34a 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            min-width: 120px;
        }

        .dice-container {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .dice-player {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            min-width: 200px;
        }

        .dice-display {
            font-size: 5rem;
            margin: 20px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="title">ğŸ’• ì‚¬ë‘í•´ ê²Œì„ ğŸ’•</div>
        <div class="subtitle">ì—°ì¸ë¼ë¦¬ 5ì ì„ ë¨¼ì € ë‹¬ì„±í•´ì„œ "ì‚¬ë‘í•´"ë¥¼ ë“¤ì–´ë³´ì„¸ìš”!</div>
        
        <!-- ê²Œì„ ëª¨ë“œ ì„ íƒ -->
        <div class="game-mode-buttons">
            <button class="mode-btn" onclick="selectMode('rps')">ğŸ® ê°€ìœ„ë°”ìœ„ë³´</button>
            <button class="mode-btn" onclick="selectMode('dice')">ğŸ² ì£¼ì‚¬ìœ„ ê²Œì„</button>
            <button class="mode-btn" onclick="selectMode('card')">ğŸƒ ì¹´ë“œ ê²Œì„</button>
        </div>
        
        <!-- ê²Œì„ ë°©ì‹ ì„¤ëª… -->
        <div style="text-align: center; margin: 15px 0; padding: 15px; background: #fff3cd; border-radius: 10px; border-left: 4px solid #ffc107;">
            <div style="font-weight: bold; color: #856404; margin-bottom: 10px;">ğŸ”¥ ìŠ¤ë¦´ ë„˜ì¹˜ëŠ” ê²Œì„ ë°©ì‹!</div>
            <div style="color: #666; font-size: 0.95rem;">
                <strong>1ë‹¨ê³„:</strong> ìŠ¹ìê°€ ë¨¼ì € ì„ íƒ â†’ ë°”ë¡œ ì˜¤í”ˆ! ğŸ“¢<br>
                <strong>2ë‹¨ê³„:</strong> íŒ¨ìê°€ ê·¸ê±¸ ë³´ê³  ì„ íƒ â†’ ì˜¤í”ˆ! âš¡<br>
                <strong>ê²°ê³¼:</strong> ë” ê¸´ì¥ê° ë„˜ì¹˜ëŠ” ëŒ€ê²°! ğŸ’¥
            </div>
        </div>
        
        <!-- ì†Œë¦¬ ì¡°ì ˆ -->
        <div style="text-align: center; margin: 15px 0; padding: 10px; background: #e3f2fd; border-radius: 10px;">
            <div style="font-weight: bold; color: #1976d2; margin-bottom: 10px;">ğŸ”Š ìŒì„± ì„¤ì •</div>
            <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
                <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="soundToggle" checked onchange="toggleSound()">
                    <span>ìŒì„± ì•ˆë‚´ ì¼œê¸°</span>
                </label>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span>ì†ë„:</span>
                    <input type="range" id="speedSlider" min="0.5" max="1.5" step="0.1" value="0.8" onchange="updateSpeechSettings()" style="width: 100px;">
                    <span id="speedValue">0.8</span>
                </div>
            </div>
        </div>

        <!-- ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ -->
        <div id="rps-game" class="game-area">
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.3rem; font-weight: bold; color: #e91e63; margin-bottom: 15px;">
                    ğŸ® ê°€ìœ„ë°”ìœ„ë³´ ëŒ€ê²°
                </div>
                <div style="color: #666; margin-bottom: 20px;">
                    6ì¥ì˜ ì¹´ë“œ ì¤‘ ì„ íƒ! ì²« ë²ˆì§¸ëŠ” ë°”ë¡œ ì˜¤í”ˆ, ë‘ ë²ˆì§¸ëŠ” ê·¸ê±¸ ë³´ê³  ì„ íƒ!
                </div>
            </div>

            <div class="score-board">
                <div class="score-card player1-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 1</div>
                    <div style="font-size: 1.5rem;" id="rps-player1-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
                <div class="score-card player2-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 2</div>
                    <div style="font-size: 1.5rem;" id="rps-player2-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
            </div>

            <!-- í˜„ì¬ ì°¨ë¡€ ë° ìƒíƒœ í‘œì‹œ -->
            <div style="text-align: center; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                <div style="font-weight: bold; color: #333;" id="rps-turn-indicator">í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!</div>
                <div style="margin-top: 10px; color: #666;" id="rps-status">6ì¥ì˜ ì¹´ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
            </div>

            <!-- ê³µê°œëœ ì¹´ë“œ í‘œì‹œ -->
            <div id="rps-revealed-area" style="display: none; text-align: center; margin: 20px 0;">
                <div style="font-weight: bold; color: #4caf50; margin-bottom: 15px;">ğŸ“¢ ê³µê°œëœ ì¹´ë“œ:</div>
                <div id="rps-revealed-card" class="revealed-card" style="display: inline-block;">?</div>
                <div style="margin-top: 15px; font-weight: bold; color: #e91e63;" id="rps-second-turn">ì´ì œ í”Œë ˆì´ì–´ 2ê°€ ì„ íƒí•˜ì„¸ìš”!</div>
            </div>

            <!-- 6ì¥ì˜ ê°€ìœ„ë°”ìœ„ë³´ ì¹´ë“œ -->
            <div style="text-align: center; margin: 20px 0;">
                <div style="display: flex; justify-content: center; gap: 10px; margin: 20px 0; flex-wrap: wrap;">
                    <div class="flip-card" onclick="selectRPSCard(0)" id="rps-card-0">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(1)" id="rps-card-1">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(2)" id="rps-card-2">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(3)" id="rps-card-3">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(4)" id="rps-card-4">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(5)" id="rps-card-5">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                </div>
            </div>

            <div class="result-area" id="rps-result"></div>
            <button class="reset-btn" onclick="resetRPS()">ê²Œì„ ë¦¬ì…‹</button>
        </div>

        <!-- ì£¼ì‚¬ìœ„ ê²Œì„ -->
        <div id="dice-game" class="game-area">
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.3rem; font-weight: bold; color: #e91e63; margin-bottom: 15px;">
                    ğŸ² ì£¼ì‚¬ìœ„ ëŒ€ê²°
                </div>
                <div style="color: #666; margin-bottom: 20px;">
                    ì²« ë²ˆì§¸ê°€ ì£¼ì‚¬ìœ„ë¥¼ ë˜ì ¸ ë°”ë¡œ ê³µê°œ! ë‘ ë²ˆì§¸ê°€ ê·¸ê±¸ ë³´ê³  ì£¼ì‚¬ìœ„ ë˜ì§€ê¸°!
                </div>
            </div>

            <div class="score-board">
                <div class="score-card player1-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 1</div>
                    <div style="font-size: 1.5rem;" id="dice-player1-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
                <div class="score-card player2-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 2</div>
                    <div style="font-size: 1.5rem;" id="dice-player2-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
            </div>

            <!-- í˜„ì¬ ì°¨ë¡€ ë° ìƒíƒœ í‘œì‹œ -->
            <div style="text-align: center; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                <div style="font-weight: bold; color: #333;" id="dice-turn-indicator">í”Œë ˆì´ì–´ 1ë¶€í„° ì£¼ì‚¬ìœ„ë¥¼ ë˜ì ¸ì£¼ì„¸ìš”!</div>
                <div style="margin-top: 10px; color: #666;" id="dice-status">ì£¼ì‚¬ìœ„ë¥¼ í´ë¦­í•´ì„œ ë˜ì§€ì„¸ìš”</div>
            </div>

            <!-- ì£¼ì‚¬ìœ„ ì˜ì—­ -->
            <div class="dice-container">
                <div class="dice-player player1-score">
                    <div style="font-weight: bold; margin-bottom: 10px;">í”Œë ˆì´ì–´ 1</div>
                    <div class="dice-display" id="dice1-display" onclick="rollDice1()">ğŸ²</div>
                    <div id="dice1-number" style="font-size: 1.2rem; font-weight: bold;">?</div>
                    <button class="choice-btn" onclick="rollDice1()" id="dice1-btn" style="margin-top: 10px;">
                        ğŸ² ë˜ì§€ê¸°
                    </button>
                </div>
                <div class="dice-player player2-score">
                    <div style="font-weight: bold; margin-bottom: 10px;">í”Œë ˆì´ì–´ 2</div>
                    <div class="dice-display" id="dice2-display" onclick="rollDice2()">ğŸ²</div>
                    <div id="dice2-number" style="font-size: 1.2rem; font-weight: bold;">?</div>
                    <button class="choice-btn" onclick="rollDice2()" id="dice2-btn" style="margin-top: 10px;" disabled>
                        ğŸ² ë˜ì§€ê¸°
                    </button>
                </div>
            </div>

            <div class="result-area" id="dice-result"></div>
            <button class="reset-btn" onclick="resetDice()">ê²Œì„ ë¦¬ì…‹</button>
        </div>

        <!-- ì¹´ë“œ ê²Œì„ -->
        <div id="card-game" class="game-area">
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.3rem; font-weight: bold; color: #e91e63; margin-bottom: 15px;">
                    ğŸƒ ì¹´ë“œ ëŒ€ê²°
                </div>
                <div style="color: #666; margin-bottom: 20px;">
                    13ì¥ì˜ ì¹´ë“œ ì¤‘ ì„ íƒ! ì²« ë²ˆì§¸ëŠ” ë°”ë¡œ ì˜¤í”ˆ, ë‘ ë²ˆì§¸ëŠ” ê·¸ê±¸ ë³´ê³  ì„ íƒ!
                </div>
            </div>

            <div class="score-board">
                <div class="score-card player1-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 1</div>
                    <div style="font-size: 1.5rem;" id="card-player1-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
                <div class="score-card player2-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 2</div>
                    <div style="font-size: 1.5rem;" id="card-player2-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
            </div>

            <!-- í˜„ì¬ ì°¨ë¡€ ë° ìƒíƒœ í‘œì‹œ -->
            <div style="text-align: center; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                <div style="font-weight: bold; color: #333;" id="card-turn-indicator">í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!</div>
                <div style="margin-top: 10px; color: #666;" id="card-status">13ì¥ì˜ ì¹´ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš” (A=1, J=11, Q=12, K=13)</div>
            </div>

            <!-- ê³µê°œëœ ì¹´ë“œ í‘œì‹œ -->
            <div id="card-revealed-area" style="display: none; text-align: center; margin: 20px 0;">
                <div style="font-weight: bold; color: #4caf50; margin-bottom: 15px;">ğŸ“¢ ê³µê°œëœ ì¹´ë“œ:</div>
                <div id="card-revealed-card" class="revealed-card" style="display: inline-block;">?</div>
                <div style="margin-top: 15px; font-weight: bold; color: #e91e63;" id="card-second-turn">ì´ì œ í”Œë ˆì´ì–´ 2ê°€ ì„ íƒí•˜ì„¸ìš”!</div>
            </div>

            <!-- 13ì¥ì˜ ì¹´ë“œ (ë¬´ì‘ìœ„ ë°°ì—´) -->
            <div style="text-align: center; margin: 20px 0;">
                <div style="display: flex; justify-content: center; gap: 8px; margin: 20px 0; flex-wrap: wrap;" id="card-container">
                    <!-- ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <div class="result-area" id="card-result"></div>
            <button class="reset-btn" onclick="resetCard()">ê²Œì„ ë¦¬ì…‹</button>
        </div>
    </div>

    <script>
        // ê²Œì„ ë³€ìˆ˜ë“¤
        let rpsPlayer1Score = 0;
        let rpsPlayer2Score = 0;
        let dicePlayer1Score = 0;
        let dicePlayer2Score = 0;
        let cardPlayer1Score = 0;
        let cardPlayer2Score = 0;
        let targetScore = 5;
        let lastWinner = null;
        
        // ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ ë³€ìˆ˜ë“¤
        let rpsCards = [];
        let rpsFirstPlayerCard = null;
        let rpsSecondPlayerCard = null;
        let rpsStep = 1; // 1: ì²«ë²ˆì§¸ ì„ íƒ, 2: ë‘ë²ˆì§¸ ì„ íƒ, 3: ê²°ê³¼
        
        // ì£¼ì‚¬ìœ„ ê²Œì„ ë³€ìˆ˜ë“¤
        let dice1Result = null;
        let dice2Result = null;
        let diceStep = 1; // 1: ì²«ë²ˆì§¸ ë˜ì§€ê¸°, 2: ë‘ë²ˆì§¸ ë˜ì§€ê¸°, 3: ê²°ê³¼
        
        // ì¹´ë“œ ê²Œì„ ë³€ìˆ˜ë“¤
        let cardValues = [];
        let cardNames = [];
        let cardFirstPlayerCard = null;
        let cardSecondPlayerCard = null;
        let cardStep = 1; // 1: ì²«ë²ˆì§¸ ì„ íƒ, 2: ë‘ë²ˆì§¸ ì„ íƒ, 3: ê²°ê³¼
        
        // ìŒì„± ì„¤ì • ë³€ìˆ˜ë“¤
        let soundEnabled = true;
        let speechRate = 0.8;
        let speechPitch = 1.1;

        // ìŒì„± í•©ì„±ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì†Œë¦¬ë‚´ì–´ ì½ê¸°
        function speakText(text) {
            if (soundEnabled && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = speechRate;
                utterance.pitch = speechPitch;
                speechSynthesis.speak(utterance);
            }
        }
        
        // ìŒì„± ì„¤ì • í•¨ìˆ˜ë“¤
        function toggleSound() {
            soundEnabled = document.getElementById('soundToggle').checked;
            if (!soundEnabled) {
                speechSynthesis.cancel();
            }
        }
        
        function updateSpeechSettings() {
            speechRate = parseFloat(document.getElementById('speedSlider').value);
            speechPitch = parseFloat(document.getElementById('pitchSlider').value);
            document.getElementById('speedValue').textContent = speechRate;
        }

        // ê²Œì„ ëª¨ë“œ ì„ íƒ
        function selectMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.game-area').forEach(area => area.classList.remove('active'));
            document.getElementById(mode + '-game').classList.add('active');
            
            if (mode === 'rps') {
                startRPSGame();
            } else if (mode === 'dice') {
                resetDice();
            } else if (mode === 'card') {
                startCardGame();
            }
        }
        
        // ì¹´ë“œ ê²Œì„ ì‹œì‘ - ì¹´ë“œ ë¬´ì‘ìœ„ ë°°ì—´
        function startCardGame() {
            // ì¹´ë“œ ë°ì´í„° ìƒì„±
            const baseCards = [
                {name: 'A', value: 1}, {name: '2', value: 2}, {name: '3', value: 3}, {name: '4', value: 4},
                {name: '5', value: 5}, {name: '6', value: 6}, {name: '7', value: 7}, {name: '8', value: 8},
                {name: '9', value: 9}, {name: '10', value: 10}, {name: 'J', value: 11}, {name: 'Q', value: 12}, {name: 'K', value: 13}
            ];
            
            // ì¹´ë“œ ë¬´ì‘ìœ„ ì„ê¸°
            const shuffledCards = baseCards.sort(() => Math.random() - 0.5);
            cardValues = shuffledCards.map(card => card.value);
            cardNames = shuffledCards.map(card => card.name);
            
            // HTMLì— ì¹´ë“œ ë™ì  ìƒì„±
            const cardContainer = document.getElementById('card-container');
            cardContainer.innerHTML = '';
            
            for (let i = 0; i < 13; i++) {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'flip-card';
                cardDiv.onclick = () => selectCard(i);
                cardDiv.id = `card-${i}`;
                cardDiv.innerHTML = `
                    <div class="flip-card-front">ğŸƒ</div>
                    <div class="flip-card-back">${cardNames[i]}</div>
                `;
                cardContainer.appendChild(cardDiv);
            }
            
            resetCardRound();
        }

        // ìŠ¹ë¦¬ ì²´í¬ í•¨ìˆ˜
        function checkWin(player1Score, player2Score, gameType) {
            if (player1Score >= targetScore) {
                document.getElementById(gameType + '-result').innerHTML = `
                    <div class="love-message">
                        ğŸ‰ í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬! ğŸ‰<br>
                        <div style="font-size: 1.5rem; margin-top: 15px; color: #ff6b6b;">
                            ğŸ’• í”Œë ˆì´ì–´ 2ê°€ ì§ì ‘ ë§í•´ì£¼ì„¸ìš”: "ì‚¬ë‘í•´!" ğŸ’•
                        </div>
                    </div>
                `;
                speakText('í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬! í”Œë ˆì´ì–´ 2ê°€ ì‚¬ë‘í•´ë¼ê³  ë§í•´ì£¼ì„¸ìš”!');
                return true;
            } else if (player2Score >= targetScore) {
                document.getElementById(gameType + '-result').innerHTML = `
                    <div class="love-message">
                        ğŸ‰ í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬! ğŸ‰<br>
                        <div style="font-size: 1.5rem; margin-top: 15px; color: #ff6b6b;">
                            ğŸ’• í”Œë ˆì´ì–´ 1ì´ ì§ì ‘ ë§í•´ì£¼ì„¸ìš”: "ì‚¬ë‘í•´!" ğŸ’•
                        </div>
                    </div>
                `;
                speakText('í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬! í”Œë ˆì´ì–´ 1ì´ ì‚¬ë‘í•´ë¼ê³  ë§í•´ì£¼ì„¸ìš”!');
                return true;
            }
            return false;
        }

        // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ ê²°ì •
        function getFirstPlayer() {
            return lastWinner === 'player2' ? 'player2' : 'player1';
        }

        // ========== ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ ==========
        function startRPSGame() {
            // 6ì¥ì˜ ê°€ìœ„ë°”ìœ„ë³´ ì¹´ë“œ ìƒì„±
            const rpsOptions = [
                { emoji: 'âœŠ', name: 'ë°”ìœ„', type: 'rock' },
                { emoji: 'âœŠ', name: 'ë°”ìœ„', type: 'rock' },
                { emoji: 'âœ‹', name: 'ë³´', type: 'paper' },
                { emoji: 'âœ‹', name: 'ë³´', type: 'paper' },
                { emoji: 'âœŒï¸', name: 'ê°€ìœ„', type: 'scissors' },
                { emoji: 'âœŒï¸', name: 'ê°€ìœ„', type: 'scissors' }
            ];
            
            rpsCards = rpsOptions.sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < 6; i++) {
                document.getElementById(`rps-card-${i}`).querySelector('.flip-card-back').textContent = rpsCards[i].emoji;
            }
            
            resetRPSRound();
        }

        function selectRPSCard(cardIndex) {
            if (rpsStep === 1) {
                // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ ì„ íƒ
                rpsFirstPlayerCard = cardIndex;
                let firstPlayer = getFirstPlayer();
                
                // ì¹´ë“œ ì¦‰ì‹œ ì˜¤í”ˆ
                document.getElementById(`rps-card-${cardIndex}`).classList.add('flipped');
                document.getElementById(`rps-card-${cardIndex}`).style.pointerEvents = 'none';
                
                // ê³µê°œëœ ì¹´ë“œ í‘œì‹œ
                document.getElementById('rps-revealed-area').style.display = 'block';
                document.getElementById('rps-revealed-card').textContent = 
                    `${rpsCards[cardIndex].emoji} ${rpsCards[cardIndex].name}`;
                
                if (firstPlayer === 'player1') {
                    document.getElementById('rps-second-turn').textContent = 'ì´ì œ í”Œë ˆì´ì–´ 2ê°€ ì„ íƒí•˜ì„¸ìš”!';
                    document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 2ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!';
                } else {
                    document.getElementById('rps-second-turn').textContent = 'ì´ì œ í”Œë ˆì´ì–´ 1ì´ ì„ íƒí•˜ì„¸ìš”!';
                    document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!';
                }
                
                document.getElementById('rps-status').textContent = 'ìƒëŒ€ë°©ì˜ ì¹´ë“œë¥¼ ë³´ê³  ì „ëµì ìœ¼ë¡œ ì„ íƒí•˜ì„¸ìš”!';
                rpsStep = 2;
                
                speakText('ì²« ë²ˆì§¸ ì¹´ë“œê°€ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤. ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ê°€ ì„ íƒí•˜ì„¸ìš”!');
                
            } else if (rpsStep === 2) {
                // ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ ì„ íƒ
                if (cardIndex === rpsFirstPlayerCard) return; // ê°™ì€ ì¹´ë“œ ì„ íƒ ë¶ˆê°€
                
                rpsSecondPlayerCard = cardIndex;
                
                // ì¹´ë“œ ì¦‰ì‹œ ì˜¤í”ˆ
                document.getElementById(`rps-card-${cardIndex}`).classList.add('flipped');
                document.getElementById(`rps-card-${cardIndex}`).style.pointerEvents = 'none';
                
                rpsStep = 3;
                
                // ê²°ê³¼ ê³„ì‚°
                setTimeout(() => {
                    calculateRPSResult();
                }, 1000);
            }
        }

        function calculateRPSResult() {
            const firstCard = rpsCards[rpsFirstPlayerCard];
            const secondCard = rpsCards[rpsSecondPlayerCard];
            let firstPlayer = getFirstPlayer();
            
            let result = '';
            let winner = '';
            
            if (firstCard.type === secondCard.type) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
            } else if (
                (firstCard.type === 'rock' && secondCard.type === 'scissors') ||
                (firstCard.type === 'paper' && secondCard.type === 'rock') ||
                (firstCard.type === 'scissors' && secondCard.type === 'paper')
            ) {
                result = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!' : 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!';
                winner = firstPlayer;
            } else {
                result = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!' : 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!';
                winner = firstPlayer === 'player1' ? 'player2' : 'player1';
            }
            
            // ì ìˆ˜ ì—…ë°ì´íŠ¸
            if (winner === 'player1') {
                rpsPlayer1Score = Math.min(targetScore, rpsPlayer1Score + 1);
                rpsPlayer2Score = Math.max(0, rpsPlayer2Score - 1);
                lastWinner = 'player1';
            } else if (winner === 'player2') {
                rpsPlayer2Score = Math.min(targetScore, rpsPlayer2Score + 1);
                rpsPlayer1Score = Math.max(0, rpsPlayer1Score - 1);
                lastWinner = 'player2';
            }
            
            document.getElementById('rps-player1-score').textContent = rpsPlayer1Score;
            document.getElementById('rps-player2-score').textContent = rpsPlayer2Score;
            
            if (!checkWin(rpsPlayer1Score, rpsPlayer2Score, 'rps')) {
                let firstPlayerName = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2';
                let secondPlayerName = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 2' : 'í”Œë ˆì´ì–´ 1';
                
                document.getElementById('rps-result').innerHTML = `
                    <div>${firstPlayerName}: ${firstCard.emoji} ${firstCard.name} vs ${secondPlayerName}: ${secondCard.emoji} ${secondCard.name}</div>
                    <div style="margin: 10px 0; font-weight: bold; font-size: 1.5rem; color: ${winner === 'player1' ? '#667eea' : winner === 'player2' ? '#e91e63' : '#666'};">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player1' ? 'í”Œë ˆì´ì–´ 1: +1ì , í”Œë ˆì´ì–´ 2: -1ì ' : 
                          winner === 'player2' ? 'í”Œë ˆì´ì–´ 2: +1ì , í”Œë ˆì´ì–´ 1: -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
                
                setTimeout(() => {
                    startRPSGame();
                }, 3000);
            }
        }

        function resetRPSRound() {
            rpsFirstPlayerCard = null;
            rpsSecondPlayerCard = null;
            rpsStep = 1;
            
            // ëª¨ë“  ì¹´ë“œ ì´ˆê¸°í™”
            document.querySelectorAll('#rps-game .flip-card').forEach(card => {
                card.classList.remove('flipped', 'selected');
                card.style.border = '';
                card.style.pointerEvents = 'auto';
            });
            
            // UI ì´ˆê¸°í™”
            document.getElementById('rps-revealed-area').style.display = 'none';
            
            let firstPlayer = getFirstPlayer();
            if (firstPlayer === 'player1') {
                document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
            } else {
                document.getElementById('rps-turn-indicator').textContent = 'ì´ì „ ìŠ¹ìì¸ í”Œë ˆì´ì–´ 2ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
            }
            document.getElementById('rps-status').textContent = '6ì¥ì˜ ì¹´ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”';
        }

        function resetRPS() {
            rpsPlayer1Score = 0;
            rpsPlayer2Score = 0;
            lastWinner = null;
            document.getElementById('rps-player1-score').textContent = '0';
            document.getElementById('rps-player2-score').textContent = '0';
            document.getElementById('rps-result').innerHTML = '';
            startRPSGame();
        }

        // ========== ì£¼ì‚¬ìœ„ ê²Œì„ ==========
        function rollDice1() {
            let firstPlayer = getFirstPlayer();
            if (diceStep === 1 && firstPlayer === 'player1') {
                // í”Œë ˆì´ì–´ 1ì´ ë¨¼ì € ë˜ì§€ëŠ” ê²½ìš°
                rollSingleDice('player1');
            } else if (diceStep === 2 && firstPlayer === 'player2') {
                // í”Œë ˆì´ì–´ 2ê°€ ë¨¼ì € ë˜ì§€ê³ , ì´ì œ í”Œë ˆì´ì–´ 1ì´ ë‘ ë²ˆì§¸ë¡œ ë˜ì§€ëŠ” ê²½ìš°
                rollSingleDice('player1');
            }
        }

        function rollDice2() {
            let firstPlayer = getFirstPlayer();
            if (diceStep === 1 && firstPlayer === 'player2') {
                // í”Œë ˆì´ì–´ 2ê°€ ë¨¼ì € ë˜ì§€ëŠ” ê²½ìš°
                rollSingleDice('player2');
            } else if (diceStep === 2 && firstPlayer === 'player1') {
                // í”Œë ˆì´ì–´ 1ì´ ë¨¼ì € ë˜ì§€ê³ , ì´ì œ í”Œë ˆì´ì–´ 2ê°€ ë‘ ë²ˆì§¸ë¡œ ë˜ì§€ëŠ” ê²½ìš°
                rollSingleDice('player2');
            }
        }

        function rollSingleDice(player) {
            let diceResult = Math.floor(Math.random() * 6) + 1;
            const diceEmojis = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
            
            if (player === 'player1') {
                dice1Result = diceResult;
            } else {
                dice2Result = diceResult;
            }
            
            // ì£¼ì‚¬ìœ„ ì• ë‹ˆë©”ì´ì…˜
            let displayId = player === 'player1' ? 'dice1-display' : 'dice2-display';
            let numberId = player === 'player1' ? 'dice1-number' : 'dice2-number';
            let btnId = player === 'player1' ? 'dice1-btn' : 'dice2-btn';
            
            let animationCount = 0;
            const animationInterval = setInterval(() => {
                document.getElementById(displayId).textContent = diceEmojis[Math.floor(Math.random() * 6)];
                animationCount++;
                if (animationCount >= 10) {
                    clearInterval(animationInterval);
                    document.getElementById(displayId).textContent = diceEmojis[diceResult - 1];
                    document.getElementById(numberId).textContent = diceResult;
                    
                    // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ê°€ ë˜ì§„ ê²½ìš°
                    if (diceStep === 1) {
                        document.getElementById(btnId).disabled = true;
                        let firstPlayer = getFirstPlayer();
                        let secondPlayer = firstPlayer === 'player1' ? 'player2' : 'player1';
                        let secondBtnId = secondPlayer === 'player1' ? 'dice1-btn' : 'dice2-btn';
                        
                        document.getElementById(secondBtnId).disabled = false;
                        document.getElementById('dice-turn-indicator').textContent = `${secondPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ì˜ ì°¨ë¡€! ${firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ì˜ ê²°ê³¼ë¥¼ ë³´ê³  ë˜ì§€ì„¸ìš”!`;
                        document.getElementById('dice-status').textContent = `${firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ì´ ${diceResult}ì„ êµ´ë ¸ìŠµë‹ˆë‹¤!`;
                        
                        diceStep = 2;
                        speakText(`${firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ì´ ${diceResult}ì„ êµ´ë ¸ìŠµë‹ˆë‹¤. ${secondPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ê°€ ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§€ì„¸ìš”!`);
                    } else {
                        // ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ê°€ ë˜ì§„ ê²½ìš°
                        document.getElementById(btnId).disabled = true;
                        diceStep = 3;
                        
                        setTimeout(() => {
                            calculateDiceResult();
                        }, 1000);
                    }
                }
            }, 100);
        }

        function calculateDiceResult() {
            let firstPlayer = getFirstPlayer();
            let firstResult = firstPlayer === 'player1' ? dice1Result : dice2Result;
            let secondResult = firstPlayer === 'player1' ? dice2Result : dice1Result;
            
            let result = '';
            let winner = '';
            
            if (firstResult === secondResult) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
            } else if (firstResult > secondResult) {
                result = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!' : 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!';
                winner = firstPlayer;
            } else {
                result = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!' : 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!';
                winner = firstPlayer === 'player1' ? 'player2' : 'player1';
            }
            
            // ì ìˆ˜ ì—…ë°ì´íŠ¸
            if (winner === 'player1') {
                dicePlayer1Score = Math.min(targetScore, dicePlayer1Score + 1);
                dicePlayer2Score = Math.max(0, dicePlayer2Score - 1);
                lastWinner = 'player1';
            } else if (winner === 'player2') {
                dicePlayer2Score = Math.min(targetScore, dicePlayer2Score + 1);
                dicePlayer1Score = Math.max(0, dicePlayer1Score - 1);
                lastWinner = 'player2';
            }
            
            document.getElementById('dice-player1-score').textContent = dicePlayer1Score;
            document.getElementById('dice-player2-score').textContent = dicePlayer2Score;
            
            if (!checkWin(dicePlayer1Score, dicePlayer2Score, 'dice')) {
                document.getElementById('dice-result').innerHTML = `
                    <div>í”Œë ˆì´ì–´ 1: ${dice1Result} vs í”Œë ˆì´ì–´ 2: ${dice2Result}</div>
                    <div style="margin: 10px 0; font-weight: bold; font-size: 1.5rem; color: ${winner === 'player1' ? '#667eea' : winner === 'player2' ? '#e91e63' : '#666'};">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player1' ? 'í”Œë ˆì´ì–´ 1: +1ì , í”Œë ˆì´ì–´ 2: -1ì ' : 
                          winner === 'player2' ? 'í”Œë ˆì´ì–´ 2: +1ì , í”Œë ˆì´ì–´ 1: -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
                
                setTimeout(() => {
                    resetDiceRound();
                }, 3000);
            }
        }

        function resetDiceRound() {
            dice1Result = null;
            dice2Result = null;
            diceStep = 1;
            
            document.getElementById('dice1-display').textContent = 'ğŸ²';
            document.getElementById('dice2-display').textContent = 'ğŸ²';
            document.getElementById('dice1-number').textContent = '?';
            document.getElementById('dice2-number').textContent = '?';
            
            let firstPlayer = getFirstPlayer();
            if (firstPlayer === 'player1') {
                document.getElementById('dice1-btn').disabled = false;
                document.getElementById('dice2-btn').disabled = true;
                document.getElementById('dice-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ë¶€í„° ì£¼ì‚¬ìœ„ë¥¼ ë˜ì ¸ì£¼ì„¸ìš”!';
            } else {
                document.getElementById('dice1-btn').disabled = true;
                document.getElementById('dice2-btn').disabled = false;
                document.getElementById('dice-turn-indicator').textContent = 'ì´ì „ ìŠ¹ìì¸ í”Œë ˆì´ì–´ 2ë¶€í„° ì£¼ì‚¬ìœ„ë¥¼ ë˜ì ¸ì£¼ì„¸ìš”!';
            }
            document.getElementById('dice-status').textContent = 'ì£¼ì‚¬ìœ„ë¥¼ í´ë¦­í•´ì„œ ë˜ì§€ì„¸ìš”';
        }

        function resetDice() {
            dicePlayer1Score = 0;
            dicePlayer2Score = 0;
            lastWinner = null;
            document.getElementById('dice-player1-score').textContent = '0';
            document.getElementById('dice-player2-score').textContent = '0';
            document.getElementById('dice-result').innerHTML = '';
            resetDiceRound();
        }

        // ========== ì¹´ë“œ ê²Œì„ (ë¹„ìŠ·í•œ ë¡œì§) ==========
        function selectCard(cardIndex) {
            let firstPlayer = getFirstPlayer();
            
            if (cardStep === 1) {
                // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ë§Œ ì„ íƒ ê°€ëŠ¥
                let canSelect = false;
                if (firstPlayer === 'player1' && cardIndex >= 0) {
                    canSelect = true;
                } else if (firstPlayer === 'player2' && cardIndex >= 0) {
                    canSelect = true;
                }
                
                if (!canSelect) return;
                
                // ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ ì„ íƒ
                cardFirstPlayerCard = cardIndex;
                
                // ì¹´ë“œ ì¦‰ì‹œ ì˜¤í”ˆ
                document.getElementById(`card-${cardIndex}`).classList.add('flipped');
                document.getElementById(`card-${cardIndex}`).style.pointerEvents = 'none';
                
                // cardNamesëŠ” ì´ì œ ì „ì—­ ë³€ìˆ˜ë¡œ ê´€ë¦¬ë¨
                const cardValue = cardValues[cardIndex];
                
                // ê³µê°œëœ ì¹´ë“œ í‘œì‹œ
                document.getElementById('card-revealed-area').style.display = 'block';
                document.getElementById('card-revealed-card').textContent = 
                    `${cardNames[cardIndex]} (${cardValue}) - ${firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}`;
                
                let secondPlayer = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 2' : 'í”Œë ˆì´ì–´ 1';
                document.getElementById('card-second-turn').textContent = `ì´ì œ ${secondPlayer}ê°€ ì„ íƒí•˜ì„¸ìš”!`;
                document.getElementById('card-turn-indicator').textContent = `${secondPlayer}ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!`;
                
                document.getElementById('card-status').textContent = `${firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ì´ ${cardNames[cardIndex]} (${cardValue})ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤! ì „ëµì ìœ¼ë¡œ ì„ íƒí•˜ì„¸ìš”!`;
                cardStep = 2;
                
                speakText(`${firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2'}ì´ ${cardNames[cardIndex]}ë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ${secondPlayer}ê°€ ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”!`);
                
            } else if (cardStep === 2) {
                // ë‘ ë²ˆì§¸ í”Œë ˆì´ì–´ ì„ íƒ
                if (cardIndex === cardFirstPlayerCard) return; // ê°™ì€ ì¹´ë“œ ì„ íƒ ë¶ˆê°€
                
                cardSecondPlayerCard = cardIndex;
                
                // ì¹´ë“œ ì¦‰ì‹œ ì˜¤í”ˆ
                document.getElementById(`card-${cardIndex}`).classList.add('flipped');
                document.getElementById(`card-${cardIndex}`).style.pointerEvents = 'none';
                
                cardStep = 3;
                
                // ê²°ê³¼ ê³„ì‚°
                setTimeout(() => {
                    calculateCardResult();
                }, 1000);
            }
        }

        function calculateCardResult() {
            const firstValue = cardValues[cardFirstPlayerCard];
            const secondValue = cardValues[cardSecondPlayerCard];
            // cardNamesëŠ” ì „ì—­ ë³€ìˆ˜ë¡œ ê´€ë¦¬ë¨
            let firstPlayer = getFirstPlayer();
            
            let result = '';
            let winner = '';
            
            if (firstValue === secondValue) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
            } else if (firstValue > secondValue) {
                result = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!' : 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!';
                winner = firstPlayer;
            } else {
                result = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!' : 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!';
                winner = firstPlayer === 'player1' ? 'player2' : 'player1';
            }
            
            // ì ìˆ˜ ì—…ë°ì´íŠ¸
            if (winner === 'player1') {
                cardPlayer1Score = Math.min(targetScore, cardPlayer1Score + 1);
                cardPlayer2Score = Math.max(0, cardPlayer2Score - 1);
                lastWinner = 'player1';
            } else if (winner === 'player2') {
                cardPlayer2Score = Math.min(targetScore, cardPlayer2Score + 1);
                cardPlayer1Score = Math.max(0, cardPlayer1Score - 1);
                lastWinner = 'player2';
            }
            
            document.getElementById('card-player1-score').textContent = cardPlayer1Score;
            document.getElementById('card-player2-score').textContent = cardPlayer2Score;
            
            if (!checkWin(cardPlayer1Score, cardPlayer2Score, 'card')) {
                let firstPlayerName = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 1' : 'í”Œë ˆì´ì–´ 2';
                let secondPlayerName = firstPlayer === 'player1' ? 'í”Œë ˆì´ì–´ 2' : 'í”Œë ˆì´ì–´ 1';
                
                document.getElementById('card-result').innerHTML = `
                    <div>${firstPlayerName}: ${cardNames[cardFirstPlayerCard]} (${firstValue}) vs ${secondPlayerName}: ${cardNames[cardSecondPlayerCard]} (${secondValue})</div>
                    <div style="margin: 10px 0; font-weight: bold; font-size: 1.5rem; color: ${winner === 'player1' ? '#667eea' : winner === 'player2' ? '#e91e63' : '#666'};">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player1' ? 'í”Œë ˆì´ì–´ 1: +1ì , í”Œë ˆì´ì–´ 2: -1ì ' : 
                          winner === 'player2' ? 'í”Œë ˆì´ì–´ 2: +1ì , í”Œë ˆì´ì–´ 1: -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
                
                setTimeout(() => {
                    resetCardRound(); // ì¹´ë“œëŠ” ê·¸ëŒ€ë¡œ ë‘ê³  ë¼ìš´ë“œë§Œ ë¦¬ì…‹
                }, 3000);
            }
        }

        function resetCardRound() {
            cardFirstPlayerCard = null;
            cardSecondPlayerCard = null;
            cardStep = 1;
            
            // ëª¨ë“  ì¹´ë“œ ì´ˆê¸°í™”
            document.querySelectorAll('#card-game .flip-card').forEach(card => {
                card.classList.remove('flipped', 'selected');
                card.style.border = '';
                card.style.pointerEvents = 'auto';
            });
            
            // UI ì´ˆê¸°í™”
            document.getElementById('card-revealed-area').style.display = 'none';
            
            let firstPlayer = getFirstPlayer();
            if (firstPlayer === 'player1') {
                document.getElementById('card-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
                document.getElementById('card-status').textContent = 'í”Œë ˆì´ì–´ 1ì´ ë¨¼ì € 13ì¥ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš” (A=1, J=11, Q=12, K=13)';
            } else {
                document.getElementById('card-turn-indicator').textContent = 'ì´ì „ ìŠ¹ìì¸ í”Œë ˆì´ì–´ 2ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
                document.getElementById('card-status').textContent = 'í”Œë ˆì´ì–´ 2ê°€ ë¨¼ì € 13ì¥ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš” (A=1, J=11, Q=12, K=13)';
            }
        }

        function resetCard() {
            cardPlayer1Score = 0;
            cardPlayer2Score = 0;
            lastWinner = null;
            document.getElementById('card-player1-score').textContent = '0';
            document.getElementById('card-player2-score').textContent = '0';
            document.getElementById('card-result').innerHTML = '';
            startCardGame(); // ì™„ì „ ë¦¬ì…‹í•  ë•ŒëŠ” ì¹´ë“œë„ ë‹¤ì‹œ ì„ê¸°
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ê²Œì„ ëª¨ë“œ í™œì„±í™”
        window.onload = function() {
            document.querySelector('.mode-btn').click();
        }
    </script>
</body>
</html>
