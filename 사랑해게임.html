<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’• ì‚¬ë‘í•´ ê²Œì„ ğŸ’•</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        .title {
            font-size: 2.5rem;
            color: #e91e63;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
        }

        .game-mode-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .mode-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s;
            font-weight: bold;
        }

        .mode-btn:hover {
            transform: scale(1.05);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
        }

        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .choices {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .choice-btn {
            background: white;
            border: 3px solid #667eea;
            padding: 20px;
            border-radius: 15px;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 120px;
            line-height: 1.2;
        }

        .choice-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .result-area {
            margin: 30px 0;
            font-size: 1.3rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .love-message {
            font-size: 2.5rem;
            color: #e91e63;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
        }

        .reset-btn:hover {
            transform: scale(1.05);
        }

        .flip-card {
            width: 80px;
            height: 120px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            color: white;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .flip-card.flipped {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
            transform: rotateY(180deg);
        }

        .score-board {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .score-card {
            text-align: center;
            padding: 15px;
            color: white;
            border-radius: 15px;
            min-width: 150px;
        }

        .player-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .computer-score {
            background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="title">ğŸ’• ì‚¬ë‘í•´ ê²Œì„ ğŸ’•</div>
        <div class="subtitle">ì—°ì¸ë¼ë¦¬ 5ì ì„ ë¨¼ì € ë‹¬ì„±í•´ì„œ ìŠ¹ë¦¬í•˜ê³  "ì‚¬ë‘í•´"ë¥¼ ì™¸ì³ë³´ì„¸ìš”!</div>
        
        <!-- ê²Œì„ ëª¨ë“œ ì„ íƒ -->
        <div class="game-mode-buttons">
            <button class="mode-btn" onclick="selectMode('rps')">ğŸ® ê°€ìœ„ë°”ìœ„ë³´</button>
            <button class="mode-btn" onclick="selectMode('dice')">ğŸ² ì£¼ì‚¬ìœ„ ê²Œì„</button>
            <button class="mode-btn" onclick="selectMode('card')">ğŸƒ ì¹´ë“œ ê²Œì„</button>
        </div>
        
        <!-- ê²Œì„ ì„¤ì • -->
        <div style="text-align: center; margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
            <!-- ë’¤ì§‘ê¸° ë°©ì‹ ì„ íƒ -->
            <div style="margin-bottom: 15px; padding: 10px; background: #fff3cd; border-radius: 8px;">
                <div style="font-weight: bold; color: #856404; margin-bottom: 10px;">ğŸ­ ë’¤ì§‘ê¸° ë°©ì‹ ì„ íƒ</div>
                <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                        <input type="radio" name="flipMode" value="simultaneous" checked onchange="updateFlipMode()">
                        <span>ğŸ­ ë™ì‹œì— ë’¤ì§‘ê¸°</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                        <input type="radio" name="flipMode" value="sequential" onchange="updateFlipMode()">
                        <span>â° ìˆœì„œëŒ€ë¡œ ë’¤ì§‘ê¸°</span>
                    </label>
                </div>
            </div>
            
            <!-- ìŒì„± ì„¤ì • -->
            <div style="padding: 10px; background: #e3f2fd; border-radius: 8px;">
                <div style="font-weight: bold; color: #1976d2; margin-bottom: 10px;">ğŸ”Š ìŒì„± ì„¤ì •</div>
                <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 5px;">
                        <input type="checkbox" id="soundToggle" checked onchange="toggleSound()">
                        <span>ìŒì„± ì•ˆë‚´ ì¼œê¸°</span>
                    </label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span>ì†ë„:</span>
                        <input type="range" id="speedSlider" min="0.5" max="1.5" step="0.1" value="0.8" onchange="updateSpeechSettings()" style="width: 100px;">
                        <span id="speedValue">0.8</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span>ìŒë†’ì´:</span>
                        <input type="range" id="pitchSlider" min="0.5" max="2" step="0.1" value="1.1" onchange="updateSpeechSettings()" style="width: 100px;">
                        <span id="pitchValue">1.1</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ -->
        <div id="rps-game" class="game-area">
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.3rem; font-weight: bold; color: #e91e63; margin-bottom: 15px;">
                    ğŸ® ê°€ìœ„ë°”ìœ„ë³´ ëŒ€ê²°
                </div>
                <div style="color: #666; margin-bottom: 20px;">
                    6ì¥ì˜ ì¹´ë“œ ì¤‘ í•˜ë‚˜ì”© ì„ íƒí•´ì„œ ê°€ìœ„ë°”ìœ„ë³´! 5ì ì„ ë¨¼ì € ë‹¬ì„±í•˜ê³  "ì‚¬ë‘í•´"ë¥¼ ì™¸ì¹˜ì„¸ìš”!
                </div>
            </div>

            <div class="score-board">
                <div class="score-card player-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 1</div>
                    <div style="font-size: 1.5rem;" id="rps-player1-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
                <div class="score-card computer-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 2</div>
                    <div style="font-size: 1.5rem;" id="rps-player2-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
            </div>

            <!-- 6ì¥ì˜ ê°€ìœ„ë°”ìœ„ë³´ ì¹´ë“œ -->
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.1rem; font-weight: bold; color: #333; margin-bottom: 20px;">
                    6ì¥ì˜ ì¹´ë“œ ì¤‘ì—ì„œ ê°ì í•˜ë‚˜ì”© ì„ íƒí•˜ì„¸ìš”
                </div>
                
                <div style="display: flex; justify-content: center; gap: 10px; margin: 20px 0; flex-wrap: wrap;">
                    <div class="flip-card" onclick="selectRPSCard(0)" id="rps-card-0">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(1)" id="rps-card-1">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(2)" id="rps-card-2">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(3)" id="rps-card-3">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(4)" id="rps-card-4">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                    <div class="flip-card" onclick="selectRPSCard(5)" id="rps-card-5">
                        <div class="flip-card-front">ğŸ´</div>
                        <div class="flip-card-back">?</div>
                    </div>
                </div>

                <!-- ì„ íƒ ìƒíƒœ í‘œì‹œ -->
                <div style="display: flex; justify-content: center; gap: 40px; margin: 20px 0;">
                    <div style="color: #667eea; font-weight: bold;" id="rps-player1-status">í”Œë ˆì´ì–´ 1: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
                    <div style="color: #e91e63; font-weight: bold;" id="rps-player2-status">í”Œë ˆì´ì–´ 2: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
                </div>
                
                <!-- í˜„ì¬ ì°¨ë¡€ ì•ˆë‚´ -->
                <div style="text-align: center; margin: 15px 0; padding: 10px; background: #fff3cd; border-radius: 8px;">
                    <div style="font-weight: bold; color: #856404;" id="rps-turn-indicator">í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!</div>
                </div>
            </div>

            <!-- ë’¤ì§‘ê¸° ë²„íŠ¼ -->
            <div style="text-align: center; margin: 30px 0;">
                <button class="reset-btn" onclick="revealRPSCards()" id="rps-reveal-btn" style="font-size: 1.3rem; padding: 15px 30px;" disabled>
                    ğŸ­ ë’¤ì§‘ê¸°!
                </button>
            </div>

            <div class="result-area" id="rps-result"></div>
            <button class="reset-btn" onclick="resetRPS()">ê²Œì„ ë¦¬ì…‹</button>
        </div>

        <!-- ì£¼ì‚¬ìœ„ ê²Œì„ -->
        <div id="dice-game" class="game-area">
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.3rem; font-weight: bold; color: #e91e63; margin-bottom: 15px;">
                    ğŸ² ì£¼ì‚¬ìœ„ ëŒ€ê²°
                </div>
                <div style="color: #666; margin-bottom: 20px;">
                    ê°ì ì£¼ì‚¬ìœ„ë¥¼ ë˜ì ¸ì„œ ë” ë†’ì€ ìˆ«ìê°€ ë‚˜ì˜¤ë©´ ìŠ¹ë¦¬! 5ì ì„ ë¨¼ì € ë‹¬ì„±í•˜ê³  "ì‚¬ë‘í•´"ë¥¼ ì™¸ì¹˜ì„¸ìš”!
                </div>
            </div>

            <div class="score-board">
                <div class="score-card player-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 1</div>
                    <div style="font-size: 1.5rem;" id="dice-player1-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
                <div class="score-card computer-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 2</div>
                    <div style="font-size: 1.5rem;" id="dice-player2-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
            </div>

            <!-- ì£¼ì‚¬ìœ„ ì˜ì—­ -->
            <div style="display: flex; justify-content: center; gap: 50px; margin: 30px 0; flex-wrap: wrap;">
                <div style="text-align: center;">
                    <div style="font-weight: bold; color: #667eea; margin-bottom: 10px;">í”Œë ˆì´ì–´ 1</div>
                    <div id="player1-dice" style="font-size: 4rem; margin: 20px 0; min-height: 80px;">ğŸ²</div>
                    <div id="player1-dice-number" style="font-size: 1.2rem; font-weight: bold;">?</div>
                    <button class="choice-btn" onclick="rollPlayer1Dice()" style="font-size: 1rem; padding: 10px 20px; margin-top: 10px;">
                        ğŸ² ë˜ì§€ê¸°
                    </button>
                </div>
                <div style="display: flex; align-items: center; font-size: 2rem; font-weight: bold; color: #666;">
                    VS
                </div>
                <div style="text-align: center;">
                    <div style="font-weight: bold; color: #e91e63; margin-bottom: 10px;">í”Œë ˆì´ì–´ 2</div>
                    <div id="player2-dice" style="font-size: 4rem; margin: 20px 0; min-height: 80px;">ğŸ²</div>
                    <div id="player2-dice-number" style="font-size: 1.2rem; font-weight: bold;">?</div>
                    <button class="choice-btn" onclick="rollPlayer2Dice()" style="font-size: 1rem; padding: 10px 20px; margin-top: 10px;">
                        ğŸ² ë˜ì§€ê¸°
                    </button>
                </div>
            </div>

            <!-- ê²°ê³¼ í™•ì¸ ë²„íŠ¼ -->
            <div style="text-align: center; margin: 20px 0;">
                <button class="reset-btn" onclick="compareDice()" id="dice-compare-btn" style="font-size: 1.3rem; padding: 15px 30px;" disabled>
                    ğŸ­ ë™ì‹œì— ë’¤ì§‘ê¸°!
                </button>
            </div>
            <div class="result-area" id="dice-result"></div>
            <button class="reset-btn" onclick="resetDice()">ê²Œì„ ë¦¬ì…‹</button>
        </div>

        <!-- ì¹´ë“œ ê²Œì„ -->
        <div id="card-game" class="game-area">
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.3rem; font-weight: bold; color: #e91e63; margin-bottom: 15px;">
                    ğŸƒ ì¹´ë“œ ëŒ€ê²°
                </div>
                <div style="color: #666; margin-bottom: 20px;">
                    13ì¥ì˜ ì¹´ë“œ ì¤‘ì—ì„œ ê°ì í•˜ë‚˜ì”© ì„ íƒ! ë” ë†’ì€ ì¹´ë“œê°€ ìŠ¹ë¦¬! 5ì ì„ ë¨¼ì € ë‹¬ì„±í•˜ê³  "ì‚¬ë‘í•´"ë¥¼ ì™¸ì¹˜ì„¸ìš”!
                </div>
            </div>

            <div class="score-board">
                <div class="score-card player-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 1</div>
                    <div style="font-size: 1.5rem;" id="card-player1-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
                <div class="score-card computer-score">
                    <div style="font-weight: bold; margin-bottom: 5px;">í”Œë ˆì´ì–´ 2</div>
                    <div style="font-size: 1.5rem;" id="card-player2-score">0</div>
                    <div style="font-size: 0.9rem;">ì ìˆ˜</div>
                </div>
            </div>

            <!-- 13ì¥ì˜ ì¹´ë“œ -->
            <div style="text-align: center; margin: 20px 0;">
                <div style="font-size: 1.1rem; font-weight: bold; color: #333; margin-bottom: 20px;">
                    13ì¥ì˜ ì¹´ë“œ ì¤‘ì—ì„œ ê°ì í•˜ë‚˜ì”© ì„ íƒí•˜ì„¸ìš” (A=1, J=11, Q=12, K=13)
                </div>
                
                <div id="card-container" style="display: flex; justify-content: center; gap: 8px; margin: 20px 0; flex-wrap: wrap;">
                    <!-- ì¹´ë“œë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>

                <!-- ì„ íƒ ìƒíƒœ í‘œì‹œ -->
                <div style="display: flex; justify-content: center; gap: 40px; margin: 20px 0;">
                    <div style="color: #667eea; font-weight: bold;" id="card-player1-status">í”Œë ˆì´ì–´ 1: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
                    <div style="color: #e91e63; font-weight: bold;" id="card-player2-status">í”Œë ˆì´ì–´ 2: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
                </div>
                
                <!-- í˜„ì¬ ì°¨ë¡€ ì•ˆë‚´ -->
                <div style="text-align: center; margin: 15px 0; padding: 10px; background: #fff3cd; border-radius: 8px;">
                    <div style="font-weight: bold; color: #856404;" id="card-turn-indicator">í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!</div>
                </div>
            </div>

            <!-- ë’¤ì§‘ê¸° ë²„íŠ¼ -->
            <div style="text-align: center; margin: 30px 0;">
                <button class="reset-btn" onclick="revealCards()" id="card-reveal-btn" style="font-size: 1.3rem; padding: 15px 30px;" disabled>
                    ğŸ­ ë’¤ì§‘ê¸°!
                </button>
            </div>
            <div class="result-area" id="card-result"></div>
            <button class="reset-btn" onclick="resetCard()">ê²Œì„ ë¦¬ì…‹</button>
        </div>
    </div>

    <script>
        // ê²Œì„ ë³€ìˆ˜ë“¤
        let rpsPlayer1Score = 0;
        let rpsPlayer2Score = 0;
        let dicePlayer1Score = 0;
        let dicePlayer2Score = 0;
        let cardPlayer1Score = 0;
        let cardPlayer2Score = 0;
        let targetScore = 5;
        
        // ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ ë³€ìˆ˜ë“¤
        let rpsPlayer1Selected = null;
        let rpsPlayer2Selected = null;
        let rpsCards = [];
        let rpsRevealed = false;
        
        // ì£¼ì‚¬ìœ„ ê²Œì„ ë³€ìˆ˜ë“¤
        let player1DiceRoll = null;
        let player2DiceRoll = null;
        
        // ì¹´ë“œ ê²Œì„ ë³€ìˆ˜ë“¤
        let cardPlayer1Selected = null;
        let cardPlayer2Selected = null;
        let cardRevealed = false;
        
        // ìŒì„± ì„¤ì • ë³€ìˆ˜ë“¤
        let soundEnabled = true;
        let speechRate = 0.8;
        let speechPitch = 1.1;
        
        // ë’¤ì§‘ê¸° ë°©ì‹ ì„¤ì •
        let flipMode = 'simultaneous'; // 'simultaneous' ë˜ëŠ” 'sequential'
        
        // ì„ íƒ ìˆœì„œ ê´€ë¦¬ (1 = í”Œë ˆì´ì–´1 ë¨¼ì €, 2 = í”Œë ˆì´ì–´2 ë¨¼ì €)
        let rpsFirstPlayer = 1;
        let diceFirstPlayer = 1;
        let cardFirstPlayer = 1;

        // ì¹´ë“œ ë± (A=1, J=11, Q=12, K=13)
        const cardSuits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
        const cardValueNames = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const cardNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];

        // ìŒì„± í•©ì„±ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì†Œë¦¬ë‚´ì–´ ì½ê¸°
        function speakText(text) {
            if (soundEnabled && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = speechRate;
                utterance.pitch = speechPitch;
                speechSynthesis.speak(utterance);
            }
        }
        
        // ìŒì„± ì„¤ì • í•¨ìˆ˜ë“¤
        function toggleSound() {
            soundEnabled = document.getElementById('soundToggle').checked;
            if (!soundEnabled) {
                speechSynthesis.cancel();
            }
        }
        
        function updateSpeechSettings() {
            speechRate = parseFloat(document.getElementById('speedSlider').value);
            speechPitch = parseFloat(document.getElementById('pitchSlider').value);
            document.getElementById('speedValue').textContent = speechRate;
            document.getElementById('pitchValue').textContent = speechPitch;
        }
        
        // ë’¤ì§‘ê¸° ë°©ì‹ ì—…ë°ì´íŠ¸
        function updateFlipMode() {
            const selectedMode = document.querySelector('input[name="flipMode"]:checked').value;
            flipMode = selectedMode;
            
            // ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            updateRevealButtonTexts();
            
            // ëª¨ë“  ê²Œì„ ìƒíƒœ ë¦¬ì…‹
            resetRPS();
            resetDice();
            resetCard();
        }
        
        // ë’¤ì§‘ê¸° ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        function updateRevealButtonTexts() {
            const rpsBtn = document.getElementById('rps-reveal-btn');
            const cardBtn = document.getElementById('card-reveal-btn');
            const diceBtn = document.getElementById('dice-compare-btn');
            
            if (flipMode === 'simultaneous') {
                rpsBtn.innerHTML = 'ğŸ­ ë™ì‹œì— ë’¤ì§‘ê¸°!';
                cardBtn.innerHTML = 'ğŸ­ ë™ì‹œì— ë’¤ì§‘ê¸°!';
                diceBtn.innerHTML = 'ğŸ­ ë™ì‹œì— ë’¤ì§‘ê¸°!';
            } else {
                rpsBtn.innerHTML = 'â° ìˆœì„œëŒ€ë¡œ ë’¤ì§‘ê¸°!';
                cardBtn.innerHTML = 'â° ìˆœì„œëŒ€ë¡œ ë’¤ì§‘ê¸°!';
                diceBtn.innerHTML = 'â° ìˆœì„œëŒ€ë¡œ ë’¤ì§‘ê¸°!';
            }
        }

        // ê²Œì„ ëª¨ë“œ ì„ íƒ
        function selectMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.game-area').forEach(area => area.classList.remove('active'));
            document.getElementById(mode + '-game').classList.add('active');
        }

        // ìŠ¹ë¦¬ ì²´í¬ í•¨ìˆ˜
        function checkWin(player1Score, player2Score, gameType) {
            if (player1Score >= targetScore) {
                document.getElementById(gameType + '-result').innerHTML = `
                    <div class="love-message">ğŸ‰ í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬! ğŸ‰<br>ğŸ’• "ì‚¬ë‘í•´!" ğŸ’•</div>
                `;
                speakText('í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬! ì‚¬ë‘í•´!');
                return true;
            } else if (player2Score >= targetScore) {
                document.getElementById(gameType + '-result').innerHTML = `
                    <div class="love-message">ğŸ‰ í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬! ğŸ‰<br>ğŸ’• "ì‚¬ë‘í•´!" ğŸ’•</div>
                `;
                speakText('í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬! ì‚¬ë‘í•´!');
                return true;
            }
            return false;
        }

        // ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„
        function playRPS(playerChoice) {
            const choices = ['rock', 'paper', 'scissors'];
            const choiceEmojis = { rock: 'âœŠ', paper: 'âœ‹', scissors: 'âœŒï¸' };
            const choiceNames = { rock: 'ë°”ìœ„', paper: 'ë³´', scissors: 'ê°€ìœ„' };
            
            const computerChoice = choices[Math.floor(Math.random() * 3)];
            
            let result = '';
            let winner = '';
            
            if (playerChoice === computerChoice) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
            } else if (
                (playerChoice === 'rock' && computerChoice === 'scissors') ||
                (playerChoice === 'paper' && computerChoice === 'rock') ||
                (playerChoice === 'scissors' && computerChoice === 'paper')
            ) {
                result = 'í”Œë ˆì´ì–´ ìŠ¹ë¦¬!';
                winner = 'player';
                rpsPlayerScore = Math.min(targetScore, rpsPlayerScore + 1);
                rpsComputerScore = Math.max(0, rpsComputerScore - 1);
            } else {
                result = 'ì»´í“¨í„° ìŠ¹ë¦¬!';
                winner = 'computer';
                rpsComputerScore = Math.min(targetScore, rpsComputerScore + 1);
                rpsPlayerScore = Math.max(0, rpsPlayerScore - 1);
            }
            
            document.getElementById('rps-player-score').textContent = rpsPlayerScore;
            document.getElementById('rps-computer-score').textContent = rpsComputerScore;
            
            if (!checkWin(rpsPlayerScore, rpsComputerScore, 'rps')) {
                document.getElementById('rps-result').innerHTML = `
                    <div>í”Œë ˆì´ì–´: ${choiceEmojis[playerChoice]} vs ì»´í“¨í„°: ${choiceEmojis[computerChoice]}</div>
                    <div style="margin: 10px 0; font-weight: bold;">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player' ? 'í”Œë ˆì´ì–´ +1ì , ì»´í“¨í„° -1ì ' : 
                          winner === 'computer' ? 'ì»´í“¨í„° +1ì , í”Œë ˆì´ì–´ -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
            }
        }

        // ê°€ìœ„ë°”ìœ„ë³´ ì¹´ë“œ ì„ íƒ
        function selectRPSCard(cardIndex) {
            if (rpsRevealed) return; // ì´ë¯¸ ë’¤ì§‘íŒ ìƒíƒœë©´ ë¬´ì‹œ
            
            // ì²« ë²ˆì§¸ ì„ íƒì ê²°ì •
            if (rpsPlayer1Selected === null && rpsPlayer2Selected === null) {
                if (rpsFirstPlayer === 1) {
                    // í”Œë ˆì´ì–´ 1ì´ ë¨¼ì € ì„ íƒ
                    rpsPlayer1Selected = cardIndex;
                    document.getElementById('rps-player1-status').textContent = 'í”Œë ˆì´ì–´ 1: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                    document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 2ê°€ ì„ íƒí•´ì£¼ì„¸ìš”!';
                    
                    // ì„ íƒ í‘œì‹œ
                    const card = document.getElementById(`rps-card-${cardIndex}`);
                    if (flipMode === 'sequential') {
                        card.classList.add('flipped');
                        const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                        const choice = rpsChoices[Math.floor(Math.random() * 3)];
                        card.querySelector('.flip-card-back').textContent = choice;
                        rpsCards[cardIndex] = choice;
                    } else {
                        // ë™ì‹œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ í‘œì‹œë§Œ
                        card.querySelector('.flip-card-front').textContent = 'ğŸ¯';
                        const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                        const choice = rpsChoices[Math.floor(Math.random() * 3)];
                        rpsCards[cardIndex] = choice;
                    }
                } else {
                    // í”Œë ˆì´ì–´ 2ê°€ ë¨¼ì € ì„ íƒ
                    rpsPlayer2Selected = cardIndex;
                    document.getElementById('rps-player2-status').textContent = 'í”Œë ˆì´ì–´ 2: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                    document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ì´ ì„ íƒí•´ì£¼ì„¸ìš”!';
                    
                    // ì„ íƒ í‘œì‹œ
                    const card = document.getElementById(`rps-card-${cardIndex}`);
                    if (flipMode === 'sequential') {
                        card.classList.add('flipped');
                        const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                        const choice = rpsChoices[Math.floor(Math.random() * 3)];
                        card.querySelector('.flip-card-back').textContent = choice;
                        rpsCards[cardIndex] = choice;
                    } else {
                        // ë™ì‹œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ í‘œì‹œë§Œ
                        card.querySelector('.flip-card-front').textContent = 'ğŸ¯';
                        const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                        const choice = rpsChoices[Math.floor(Math.random() * 3)];
                        rpsCards[cardIndex] = choice;
                    }
                }
            } else {
                // ë‘ ë²ˆì§¸ ì„ íƒì
                if (rpsPlayer1Selected === null) {
                    // í”Œë ˆì´ì–´ 1ì´ ë‘ ë²ˆì§¸ë¡œ ì„ íƒ
                    rpsPlayer1Selected = cardIndex;
                    document.getElementById('rps-player1-status').textContent = 'í”Œë ˆì´ì–´ 1: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                } else {
                    // í”Œë ˆì´ì–´ 2ê°€ ë‘ ë²ˆì§¸ë¡œ ì„ íƒ
                    rpsPlayer2Selected = cardIndex;
                    document.getElementById('rps-player2-status').textContent = 'í”Œë ˆì´ì–´ 2: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                }
                
                // ì„ íƒ í‘œì‹œ
                const card = document.getElementById(`rps-card-${cardIndex}`);
                if (flipMode === 'sequential') {
                    card.classList.add('flipped');
                    const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                    const choice = rpsChoices[Math.floor(Math.random() * 3)];
                    card.querySelector('.flip-card-back').textContent = choice;
                    rpsCards[cardIndex] = choice;
                    
                    // ìë™ìœ¼ë¡œ ê²°ê³¼ ê³„ì‚°
                    setTimeout(() => {
                        calculateRPSResult();
                    }, 1000);
                } else {
                    // ë™ì‹œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ í‘œì‹œë§Œ
                    card.querySelector('.flip-card-front').textContent = 'ğŸ¯';
                    const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                    const choice = rpsChoices[Math.floor(Math.random() * 3)];
                    rpsCards[cardIndex] = choice;
                    
                    document.getElementById('rps-turn-indicator').textContent = 'ë’¤ì§‘ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!';
                    document.getElementById('rps-reveal-btn').disabled = false;
                }
            }
        }
        
        // ê°€ìœ„ë°”ìœ„ë³´ ì¹´ë“œ ë’¤ì§‘ê¸°
        function revealRPSCards() {
            if (rpsPlayer1Selected === null || rpsPlayer2Selected === null) return;
            
            rpsRevealed = true;
            document.getElementById('rps-reveal-btn').disabled = true;
            
            if (flipMode === 'simultaneous') {
                // ë™ì‹œì— ë’¤ì§‘ê¸° - ë¨¼ì € ì•ë©´ì„ ì›ë˜ëŒ€ë¡œ ë³µì›
                const card1 = document.getElementById(`rps-card-${rpsPlayer1Selected}`);
                const card2 = document.getElementById(`rps-card-${rpsPlayer2Selected}`);
                
                // ì•ë©´ì„ ì›ë˜ëŒ€ë¡œ ë³µì›
                card1.querySelector('.flip-card-front').textContent = 'ğŸ´';
                card2.querySelector('.flip-card-front').textContent = 'ğŸ´';
                
                // ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜
                setTimeout(() => {
                    const rpsChoices = ['âœŠ', 'âœ‹', 'âœŒï¸'];
                    
                    // í”Œë ˆì´ì–´ 1 ì¹´ë“œ ë’¤ì§‘ê¸°
                    card1.classList.add('flipped');
                    const choice1 = rpsCards[rpsPlayer1Selected];
                    card1.querySelector('.flip-card-back').textContent = choice1;
                    
                    // í”Œë ˆì´ì–´ 2 ì¹´ë“œ ë’¤ì§‘ê¸°
                    card2.classList.add('flipped');
                    const choice2 = rpsCards[rpsPlayer2Selected];
                    card2.querySelector('.flip-card-back').textContent = choice2;
                    
                    setTimeout(() => {
                        calculateRPSResult();
                    }, 500);
                }, 200);
            }
        }
        
        // ê°€ìœ„ë°”ìœ„ë³´ ê²°ê³¼ ê³„ì‚°
        function calculateRPSResult() {
            const choice1 = rpsCards[rpsPlayer1Selected];
            const choice2 = rpsCards[rpsPlayer2Selected];
            
            const choiceNames = { 'âœŠ': 'ë°”ìœ„', 'âœ‹': 'ë³´', 'âœŒï¸': 'ê°€ìœ„' };
            
            let result = '';
            let winner = '';
            
            if (choice1 === choice2) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
                // ë¬´ìŠ¹ë¶€ ì‹œì—ëŠ” ìˆœì„œ ë³€ê²½ ì—†ìŒ
            } else if (
                (choice1 === 'âœŠ' && choice2 === 'âœŒï¸') ||
                (choice1 === 'âœ‹' && choice2 === 'âœŠ') ||
                (choice1 === 'âœŒï¸' && choice2 === 'âœ‹')
            ) {
                result = 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!';
                winner = 'player1';
                rpsPlayer1Score = Math.min(targetScore, rpsPlayer1Score + 1);
                rpsPlayer2Score = Math.max(0, rpsPlayer2Score - 1);
                // í”Œë ˆì´ì–´ 2ê°€ ì¡Œìœ¼ë¯€ë¡œ ë‹¤ìŒ ë¼ìš´ë“œì—ì„œ ë¨¼ì € ì„ íƒ
                rpsFirstPlayer = 2;
            } else {
                result = 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!';
                winner = 'player2';
                rpsPlayer2Score = Math.min(targetScore, rpsPlayer2Score + 1);
                rpsPlayer1Score = Math.max(0, rpsPlayer1Score - 1);
                // í”Œë ˆì´ì–´ 1ì´ ì¡Œìœ¼ë¯€ë¡œ ë‹¤ìŒ ë¼ìš´ë“œì—ì„œ ë¨¼ì € ì„ íƒ
                rpsFirstPlayer = 1;
            }
            
            document.getElementById('rps-player1-score').textContent = rpsPlayer1Score;
            document.getElementById('rps-player2-score').textContent = rpsPlayer2Score;
            
            if (!checkWin(rpsPlayer1Score, rpsPlayer2Score, 'rps')) {
                document.getElementById('rps-result').innerHTML = `
                    <div>í”Œë ˆì´ì–´ 1: ${choice1} (${choiceNames[choice1]}) vs í”Œë ˆì´ì–´ 2: ${choice2} (${choiceNames[choice2]})</div>
                    <div style="margin: 10px 0; font-weight: bold;">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player1' ? 'í”Œë ˆì´ì–´ 1 +1ì , í”Œë ˆì´ì–´ 2 -1ì ' : 
                          winner === 'player2' ? 'í”Œë ˆì´ì–´ 2 +1ì , í”Œë ˆì´ì–´ 1 -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
                
                // ë‹¤ìŒ ë¼ìš´ë“œ ì¤€ë¹„
                setTimeout(() => {
                    resetRPSRound();
                }, 3000);
            }
        }
        
        // ê°€ìœ„ë°”ìœ„ë³´ ë¼ìš´ë“œ ë¦¬ì…‹
        function resetRPSRound() {
            rpsPlayer1Selected = null;
            rpsPlayer2Selected = null;
            rpsRevealed = false;
            rpsCards = [];
            
            // ëª¨ë“  ì¹´ë“œ ë’¤ì§‘ê¸° í•´ì œ
            for (let i = 0; i < 6; i++) {
                const card = document.getElementById(`rps-card-${i}`);
                card.classList.remove('flipped');
                card.querySelector('.flip-card-front').textContent = 'ğŸ´';
                card.querySelector('.flip-card-back').textContent = '?';
            }
            
            // UI ìƒíƒœ ë¦¬ì…‹ - ì„ íƒ ìˆœì„œì— ë”°ë¼ ì•ˆë‚´ ë©”ì‹œì§€ ë³€ê²½
            document.getElementById('rps-player1-status').textContent = 'í”Œë ˆì´ì–´ 1: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”';
            document.getElementById('rps-player2-status').textContent = 'í”Œë ˆì´ì–´ 2: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”';
            
            if (rpsFirstPlayer === 1) {
                document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
            } else {
                document.getElementById('rps-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 2ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
            }
            
            document.getElementById('rps-reveal-btn').disabled = true;
        }

        function resetRPS() {
            rpsPlayer1Score = 0;
            rpsPlayer2Score = 0;
            rpsFirstPlayer = 1; // ê²Œì„ ë¦¬ì…‹ ì‹œ í”Œë ˆì´ì–´ 1ë¶€í„° ì‹œì‘
            document.getElementById('rps-player1-score').textContent = '0';
            document.getElementById('rps-player2-score').textContent = '0';
            document.getElementById('rps-result').innerHTML = '';
            resetRPSRound();
        }

        // ì£¼ì‚¬ìœ„ ê²Œì„
        function rollPlayer1Dice() {
            if (player1DiceRoll !== null) return; // ì´ë¯¸ ë˜ì§„ ê²½ìš° ë¬´ì‹œ
            
            player1DiceRoll = Math.floor(Math.random() * 6) + 1;
            
            if (flipMode === 'sequential') {
                // ìˆœì„œëŒ€ë¡œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì¦‰ì‹œ ê³µê°œ
                setTimeout(() => {
                    const diceEmojis = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
                    document.getElementById('player1-dice').textContent = diceEmojis[player1DiceRoll - 1];
                    document.getElementById('player1-dice-number').textContent = player1DiceRoll;
                }, 500);
            } else {
                // ë™ì‹œì— ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ ì™„ë£Œ í‘œì‹œë§Œ
                document.getElementById('player1-dice').textContent = 'ğŸ¯';
                document.getElementById('player1-dice-number').textContent = 'ì„ íƒì™„ë£Œ';
            }
            
            // ë‘ í”Œë ˆì´ì–´ ëª¨ë‘ ë˜ì¡Œìœ¼ë©´ ë¹„êµ ë²„íŠ¼ í™œì„±í™” (ë™ì‹œ ëª¨ë“œ) ë˜ëŠ” ìë™ ê²°ê³¼ (ìˆœì„œ ëª¨ë“œ)
            if (player2DiceRoll !== null) {
                if (flipMode === 'simultaneous') {
                    document.getElementById('dice-compare-btn').disabled = false;
                } else {
                    // ìˆœì„œëŒ€ë¡œ ëª¨ë“œì—ì„œëŠ” ìë™ìœ¼ë¡œ ê²°ê³¼ ê³„ì‚°
                    setTimeout(() => {
                        calculateDiceResult();
                    }, 1500);
                }
            }
        }
        
        function rollPlayer2Dice() {
            if (player2DiceRoll !== null) return; // ì´ë¯¸ ë˜ì§„ ê²½ìš° ë¬´ì‹œ
            
            player2DiceRoll = Math.floor(Math.random() * 6) + 1;
            
            if (flipMode === 'sequential') {
                // ìˆœì„œëŒ€ë¡œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì¦‰ì‹œ ê³µê°œ
                setTimeout(() => {
                    const diceEmojis = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
                    document.getElementById('player2-dice').textContent = diceEmojis[player2DiceRoll - 1];
                    document.getElementById('player2-dice-number').textContent = player2DiceRoll;
                }, 500);
            } else {
                // ë™ì‹œì— ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ ì™„ë£Œ í‘œì‹œë§Œ
                document.getElementById('player2-dice').textContent = 'ğŸ¯';
                document.getElementById('player2-dice-number').textContent = 'ì„ íƒì™„ë£Œ';
            }
            
            // ë‘ í”Œë ˆì´ì–´ ëª¨ë‘ ë˜ì¡Œìœ¼ë©´ ë¹„êµ ë²„íŠ¼ í™œì„±í™” (ë™ì‹œ ëª¨ë“œ) ë˜ëŠ” ìë™ ê²°ê³¼ (ìˆœì„œ ëª¨ë“œ)
            if (player1DiceRoll !== null) {
                if (flipMode === 'simultaneous') {
                    document.getElementById('dice-compare-btn').disabled = false;
                } else {
                    // ìˆœì„œëŒ€ë¡œ ëª¨ë“œì—ì„œëŠ” ìë™ìœ¼ë¡œ ê²°ê³¼ ê³„ì‚°
                    setTimeout(() => {
                        calculateDiceResult();
                    }, 1500);
                }
            }
        }
        
        function compareDice() {
            if (player1DiceRoll === null || player2DiceRoll === null) return;
            
            document.getElementById('dice-compare-btn').disabled = true;
            
            // ë™ì‹œì— ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜
            document.getElementById('player1-dice').textContent = 'ğŸ²';
            document.getElementById('player2-dice').textContent = 'ğŸ²';
            document.getElementById('player1-dice-number').textContent = '?';
            document.getElementById('player2-dice-number').textContent = '?';
            
            setTimeout(() => {
                const diceEmojis = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
                document.getElementById('player1-dice').textContent = diceEmojis[player1DiceRoll - 1];
                document.getElementById('player2-dice').textContent = diceEmojis[player2DiceRoll - 1];
                document.getElementById('player1-dice-number').textContent = player1DiceRoll;
                document.getElementById('player2-dice-number').textContent = player2DiceRoll;
                
                calculateDiceResult();
            }, 1000);
        }
        
        function calculateDiceResult() {
            let result = '';
            let winner = '';
            
            if (player1DiceRoll === player2DiceRoll) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
                // ë¬´ìŠ¹ë¶€ ì‹œì—ëŠ” ìˆœì„œ ë³€ê²½ ì—†ìŒ
            } else if (player1DiceRoll > player2DiceRoll) {
                result = 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!';
                winner = 'player1';
                dicePlayer1Score = Math.min(targetScore, dicePlayer1Score + 1);
                dicePlayer2Score = Math.max(0, dicePlayer2Score - 1);
                // í”Œë ˆì´ì–´ 2ê°€ ì¡Œìœ¼ë¯€ë¡œ ë‹¤ìŒ ë¼ìš´ë“œì—ì„œ ë¨¼ì € ì„ íƒ
                diceFirstPlayer = 2;
            } else {
                result = 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!';
                winner = 'player2';
                dicePlayer2Score = Math.min(targetScore, dicePlayer2Score + 1);
                dicePlayer1Score = Math.max(0, dicePlayer1Score - 1);
                // í”Œë ˆì´ì–´ 1ì´ ì¡Œìœ¼ë¯€ë¡œ ë‹¤ìŒ ë¼ìš´ë“œì—ì„œ ë¨¼ì € ì„ íƒ
                diceFirstPlayer = 1;
            }
            
            document.getElementById('dice-player1-score').textContent = dicePlayer1Score;
            document.getElementById('dice-player2-score').textContent = dicePlayer2Score;
            
            if (!checkWin(dicePlayer1Score, dicePlayer2Score, 'dice')) {
                document.getElementById('dice-result').innerHTML = `
                    <div>í”Œë ˆì´ì–´ 1: ${player1DiceRoll} vs í”Œë ˆì´ì–´ 2: ${player2DiceRoll}</div>
                    <div style="margin: 10px 0; font-weight: bold;">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player1' ? 'í”Œë ˆì´ì–´ 1 +1ì , í”Œë ˆì´ì–´ 2 -1ì ' : 
                          winner === 'player2' ? 'í”Œë ˆì´ì–´ 2 +1ì , í”Œë ˆì´ì–´ 1 -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
                
                // ë‹¤ìŒ ë¼ìš´ë“œ ì¤€ë¹„
                setTimeout(() => {
                    resetDiceRound();
                }, 3000);
            }
        }
        
        function resetDiceRound() {
            player1DiceRoll = null;
            player2DiceRoll = null;
            document.getElementById('player1-dice').textContent = 'ğŸ²';
            document.getElementById('player2-dice').textContent = 'ğŸ²';
            document.getElementById('player1-dice-number').textContent = '?';
            document.getElementById('player2-dice-number').textContent = '?';
            document.getElementById('dice-compare-btn').disabled = true;
        }

        function rollDice() {
            const playerRoll = Math.floor(Math.random() * 6) + 1;
            const computerRoll = Math.floor(Math.random() * 6) + 1;
            
            // ì£¼ì‚¬ìœ„ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            document.getElementById('player-dice').textContent = 'ğŸ²';
            document.getElementById('computer-dice').textContent = 'ğŸ²';
            document.getElementById('player-dice-number').textContent = '?';
            document.getElementById('computer-dice-number').textContent = '?';
            
            setTimeout(() => {
                const diceEmojis = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
                document.getElementById('player-dice').textContent = diceEmojis[playerRoll - 1];
                document.getElementById('computer-dice').textContent = diceEmojis[computerRoll - 1];
                document.getElementById('player-dice-number').textContent = playerRoll;
                document.getElementById('computer-dice-number').textContent = computerRoll;
                
                let result = '';
                let winner = '';
                
                if (playerRoll === computerRoll) {
                    result = 'ë¬´ìŠ¹ë¶€!';
                    winner = 'draw';
                } else if (playerRoll > computerRoll) {
                    result = 'í”Œë ˆì´ì–´ ìŠ¹ë¦¬!';
                    winner = 'player';
                    dicePlayerScore = Math.min(targetScore, dicePlayerScore + 1);
                    diceComputerScore = Math.max(0, diceComputerScore - 1);
                } else {
                    result = 'ì»´í“¨í„° ìŠ¹ë¦¬!';
                    winner = 'computer';
                    diceComputerScore = Math.min(targetScore, diceComputerScore + 1);
                    dicePlayerScore = Math.max(0, dicePlayerScore - 1);
                }
                
                document.getElementById('dice-player-score').textContent = dicePlayerScore;
                document.getElementById('dice-computer-score').textContent = diceComputerScore;
                
                if (!checkWin(dicePlayerScore, diceComputerScore, 'dice')) {
                    document.getElementById('dice-result').innerHTML = `
                        <div>í”Œë ˆì´ì–´: ${playerRoll} vs ì»´í“¨í„°: ${computerRoll}</div>
                        <div style="margin: 10px 0; font-weight: bold;">${result}</div>
                        <div style="font-size: 1rem; color: #666;">
                            ${winner === 'player' ? 'í”Œë ˆì´ì–´ +1ì , ì»´í“¨í„° -1ì ' : 
                              winner === 'computer' ? 'ì»´í“¨í„° +1ì , í”Œë ˆì´ì–´ -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                        </div>
                    `;
                }
            }, 1000);
        }

        function resetDice() {
            dicePlayer1Score = 0;
            dicePlayer2Score = 0;
            diceFirstPlayer = 1; // ê²Œì„ ë¦¬ì…‹ ì‹œ í”Œë ˆì´ì–´ 1ë¶€í„° ì‹œì‘
            document.getElementById('dice-player1-score').textContent = '0';
            document.getElementById('dice-player2-score').textContent = '0';
            document.getElementById('dice-result').innerHTML = '';
            resetDiceRound();
        }

        // ì¹´ë“œ ê²Œì„
        let cardValues = [];
        let cardNames = [];
        
        // ì¹´ë“œ ê²Œì„ ì‹œì‘
        function startCardGame() {
            // resetCardRoundì—ì„œ ëª¨ë“  ì„ê¸°ì™€ ì´ˆê¸°í™”ë¥¼ ë‹´ë‹¹
            resetCardRound();
        }
        
        // ì¹´ë“œ ì„ íƒ
        function selectCard(cardIndex) {
            if (cardRevealed) return; // ì´ë¯¸ ë’¤ì§‘íŒ ìƒíƒœë©´ ë¬´ì‹œ
            
            // ì²« ë²ˆì§¸ ì„ íƒì ê²°ì •
            if (cardPlayer1Selected === null && cardPlayer2Selected === null) {
                if (cardFirstPlayer === 1) {
                    // í”Œë ˆì´ì–´ 1ì´ ë¨¼ì € ì„ íƒ
                    cardPlayer1Selected = cardIndex;
                    document.getElementById('card-player1-status').textContent = 'í”Œë ˆì´ì–´ 1: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                    document.getElementById('card-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 2ê°€ ì„ íƒí•´ì£¼ì„¸ìš”!';
                    
                    // ì„ íƒ í‘œì‹œ
                    const card = document.getElementById(`card-${cardIndex}`);
                    if (flipMode === 'sequential') {
                        card.classList.add('flipped');
                    } else {
                        // ë™ì‹œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ í‘œì‹œë§Œ
                        card.querySelector('.flip-card-front').textContent = 'ğŸ¯';
                    }
                } else {
                    // í”Œë ˆì´ì–´ 2ê°€ ë¨¼ì € ì„ íƒ
                    cardPlayer2Selected = cardIndex;
                    document.getElementById('card-player2-status').textContent = 'í”Œë ˆì´ì–´ 2: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                    document.getElementById('card-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ì´ ì„ íƒí•´ì£¼ì„¸ìš”!';
                    
                    // ì„ íƒ í‘œì‹œ
                    const card = document.getElementById(`card-${cardIndex}`);
                    if (flipMode === 'sequential') {
                        card.classList.add('flipped');
                    } else {
                        // ë™ì‹œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ í‘œì‹œë§Œ
                        card.querySelector('.flip-card-front').textContent = 'ğŸ¯';
                    }
                }
            } else {
                // ë‘ ë²ˆì§¸ ì„ íƒì
                if (cardPlayer1Selected === null) {
                    // í”Œë ˆì´ì–´ 1ì´ ë‘ ë²ˆì§¸ë¡œ ì„ íƒ
                    cardPlayer1Selected = cardIndex;
                    document.getElementById('card-player1-status').textContent = 'í”Œë ˆì´ì–´ 1: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                } else {
                    // í”Œë ˆì´ì–´ 2ê°€ ë‘ ë²ˆì§¸ë¡œ ì„ íƒ
                    cardPlayer2Selected = cardIndex;
                    document.getElementById('card-player2-status').textContent = 'í”Œë ˆì´ì–´ 2: ì¹´ë“œ ì„ íƒ ì™„ë£Œ!';
                }
                
                // ì„ íƒ í‘œì‹œ
                const card = document.getElementById(`card-${cardIndex}`);
                if (flipMode === 'sequential') {
                    card.classList.add('flipped');
                    
                    // ìë™ìœ¼ë¡œ ê²°ê³¼ ê³„ì‚°
                    setTimeout(() => {
                        calculateCardResult();
                    }, 1000);
                } else {
                    // ë™ì‹œ ë’¤ì§‘ê¸° ëª¨ë“œì—ì„œëŠ” ì„ íƒ í‘œì‹œë§Œ
                    card.querySelector('.flip-card-front').textContent = 'ğŸ¯';
                    
                    document.getElementById('card-turn-indicator').textContent = 'ë’¤ì§‘ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!';
                    document.getElementById('card-reveal-btn').disabled = false;
                }
            }
        }
        
        // ì¹´ë“œ ë’¤ì§‘ê¸°
        function revealCards() {
            if (cardPlayer1Selected === null || cardPlayer2Selected === null) return;
            
            cardRevealed = true;
            document.getElementById('card-reveal-btn').disabled = true;
            
            if (flipMode === 'simultaneous') {
                // ë™ì‹œì— ë’¤ì§‘ê¸° - ë¨¼ì € ì•ë©´ì„ ì›ë˜ëŒ€ë¡œ ë³µì›
                const card1 = document.getElementById(`card-${cardPlayer1Selected}`);
                const card2 = document.getElementById(`card-${cardPlayer2Selected}`);
                
                // ì•ë©´ì„ ì›ë˜ëŒ€ë¡œ ë³µì›
                card1.querySelector('.flip-card-front').textContent = 'ğŸƒ';
                card2.querySelector('.flip-card-front').textContent = 'ğŸƒ';
                
                // ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜
                setTimeout(() => {
                    card1.classList.add('flipped');
                    card2.classList.add('flipped');
                    
                    setTimeout(() => {
                        calculateCardResult();
                    }, 500);
                }, 200);
            }
        }
        
        // ì¹´ë“œ ê²°ê³¼ ê³„ì‚°
        function calculateCardResult() {
            const value1 = cardValues[cardPlayer1Selected];
            const value2 = cardValues[cardPlayer2Selected];
            const name1 = cardNames[cardPlayer1Selected];
            const name2 = cardNames[cardPlayer2Selected];
            
            let result = '';
            let winner = '';
            
            if (value1 === value2) {
                result = 'ë¬´ìŠ¹ë¶€!';
                winner = 'draw';
                // ë¬´ìŠ¹ë¶€ ì‹œì—ëŠ” ìˆœì„œ ë³€ê²½ ì—†ìŒ
            } else if (value1 > value2) {
                result = 'í”Œë ˆì´ì–´ 1 ìŠ¹ë¦¬!';
                winner = 'player1';
                cardPlayer1Score = Math.min(targetScore, cardPlayer1Score + 1);
                cardPlayer2Score = Math.max(0, cardPlayer2Score - 1);
                // í”Œë ˆì´ì–´ 2ê°€ ì¡Œìœ¼ë¯€ë¡œ ë‹¤ìŒ ë¼ìš´ë“œì—ì„œ ë¨¼ì € ì„ íƒ
                cardFirstPlayer = 2;
            } else {
                result = 'í”Œë ˆì´ì–´ 2 ìŠ¹ë¦¬!';
                winner = 'player2';
                cardPlayer2Score = Math.min(targetScore, cardPlayer2Score + 1);
                cardPlayer1Score = Math.max(0, cardPlayer1Score - 1);
                // í”Œë ˆì´ì–´ 1ì´ ì¡Œìœ¼ë¯€ë¡œ ë‹¤ìŒ ë¼ìš´ë“œì—ì„œ ë¨¼ì € ì„ íƒ
                cardFirstPlayer = 1;
            }
            
            document.getElementById('card-player1-score').textContent = cardPlayer1Score;
            document.getElementById('card-player2-score').textContent = cardPlayer2Score;
            
            if (!checkWin(cardPlayer1Score, cardPlayer2Score, 'card')) {
                document.getElementById('card-result').innerHTML = `
                    <div>í”Œë ˆì´ì–´ 1: ${name1} (${value1}) vs í”Œë ˆì´ì–´ 2: ${name2} (${value2})</div>
                    <div style="margin: 10px 0; font-weight: bold;">${result}</div>
                    <div style="font-size: 1rem; color: #666;">
                        ${winner === 'player1' ? 'í”Œë ˆì´ì–´ 1 +1ì , í”Œë ˆì´ì–´ 2 -1ì ' : 
                          winner === 'player2' ? 'í”Œë ˆì´ì–´ 2 +1ì , í”Œë ˆì´ì–´ 1 -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                    </div>
                `;
                
                // ë‹¤ìŒ ë¼ìš´ë“œ ì¤€ë¹„
                setTimeout(() => {
                    resetCardRound();
                }, 3000);
            }
        }
        
        // ì¹´ë“œ ë¼ìš´ë“œ ë¦¬ì…‹ (ë§¤ ë¼ìš´ë“œë§ˆë‹¤ ìƒˆë¡œ ì„ê¸°)
        function resetCardRound() {
            cardPlayer1Selected = null;
            cardPlayer2Selected = null;
            cardRevealed = false;
            
            // ì¹´ë“œ ë± ìƒì„±
            const baseCards = [];
            for (let i = 0; i < 13; i++) {
                baseCards.push({
                    name: cardValueNames[i],
                    value: cardNumbers[i]
                });
            }
            
            // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì™„ì „íˆ ì„ê¸°
            const shuffledCards = [...baseCards];
            for (let i = shuffledCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledCards[i], shuffledCards[j]] = [shuffledCards[j], shuffledCards[i]];
            }
            
            // ì¹´ë“œ ë°°ì—´ ì´ˆê¸°í™”
            cardValues = [];
            cardNames = [];
            
            // ì¹´ë“œ ì»¨í…Œì´ë„ˆ ë¹„ìš°ê¸°
            const cardContainer = document.getElementById('card-container');
            cardContainer.innerHTML = '';
            
            // ì¹´ë“œ HTML ë™ì  ìƒì„± - ë§¤ë²ˆ ìƒˆë¡œ ì„ì¸ ìˆœì„œë¡œ ë°°ì¹˜
            for (let i = 0; i < 13; i++) {
                // ì¹´ë“œ HTML ìƒì„±
                const cardDiv = document.createElement('div');
                cardDiv.className = 'flip-card';
                cardDiv.id = `card-${i}`;
                cardDiv.style.width = '60px';
                cardDiv.style.height = '90px';
                cardDiv.style.fontSize = '1.5rem';
                cardDiv.onclick = () => selectCard(i);
                
                cardDiv.innerHTML = `
                    <div class="flip-card-front">ğŸƒ</div>
                    <div class="flip-card-back">${shuffledCards[i].name}</div>
                `;
                
                cardContainer.appendChild(cardDiv);
                
                // ë°°ì—´ì— ì €ì¥
                cardValues[i] = shuffledCards[i].value;
                cardNames[i] = shuffledCards[i].name;
            }
            
            // ë””ë²„ê·¸: ë§¤ ë¼ìš´ë“œ ì„ì¸ ì¹´ë“œ ìˆœì„œ í™•ì¸
            console.log('ë¼ìš´ë“œ ì‹œì‘ - ì¹´ë“œ ì„ê¸° ê²°ê³¼:', shuffledCards.map(card => card.name).join(', '));
            
            // UI ìƒíƒœ ë¦¬ì…‹ - ì„ íƒ ìˆœì„œì— ë”°ë¼ ì•ˆë‚´ ë©”ì‹œì§€ ë³€ê²½
            document.getElementById('card-player1-status').textContent = 'í”Œë ˆì´ì–´ 1: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”';
            document.getElementById('card-player2-status').textContent = 'í”Œë ˆì´ì–´ 2: ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”';
            
            if (cardFirstPlayer === 1) {
                document.getElementById('card-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 1ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
            } else {
                document.getElementById('card-turn-indicator').textContent = 'í”Œë ˆì´ì–´ 2ë¶€í„° ì„ íƒí•´ì£¼ì„¸ìš”!';
            }
            
            document.getElementById('card-reveal-btn').disabled = true;
        }

        function drawCards() {
            const playerCardIndex = Math.floor(Math.random() * 13);
            const computerCardIndex = Math.floor(Math.random() * 13);
            const playerSuit = cardSuits[Math.floor(Math.random() * 4)];
            const computerSuit = cardSuits[Math.floor(Math.random() * 4)];
            
            const playerCard = cardValueNames[playerCardIndex];
            const computerCard = cardValueNames[computerCardIndex];
            const playerValue = cardNumbers[playerCardIndex];
            const computerValue = cardNumbers[computerCardIndex];
            
            // ì¹´ë“œ ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜
            document.getElementById('player-card-container').classList.add('flipped');
            document.getElementById('computer-card-container').classList.add('flipped');
            
            setTimeout(() => {
                document.getElementById('player-card').textContent = playerSuit + playerCard;
                document.getElementById('computer-card').textContent = computerSuit + computerCard;
                document.getElementById('player-card-value').textContent = `${playerCard} (${playerValue})`;
                document.getElementById('computer-card-value').textContent = `${computerCard} (${computerValue})`;
                
                let result = '';
                let winner = '';
                
                if (playerValue === computerValue) {
                    result = 'ë¬´ìŠ¹ë¶€!';
                    winner = 'draw';
                } else if (playerValue > computerValue) {
                    result = 'í”Œë ˆì´ì–´ ìŠ¹ë¦¬!';
                    winner = 'player';
                    cardPlayerScore = Math.min(targetScore, cardPlayerScore + 1);
                    cardComputerScore = Math.max(0, cardComputerScore - 1);
                } else {
                    result = 'ì»´í“¨í„° ìŠ¹ë¦¬!';
                    winner = 'computer';
                    cardComputerScore = Math.min(targetScore, cardComputerScore + 1);
                    cardPlayerScore = Math.max(0, cardPlayerScore - 1);
                }
                
                document.getElementById('card-player-score').textContent = cardPlayerScore;
                document.getElementById('card-computer-score').textContent = cardComputerScore;
                
                if (!checkWin(cardPlayerScore, cardComputerScore, 'card')) {
                    document.getElementById('card-result').innerHTML = `
                        <div>í”Œë ˆì´ì–´: ${playerSuit}${playerCard} (${playerValue}) vs ì»´í“¨í„°: ${computerSuit}${computerCard} (${computerValue})</div>
                        <div style="margin: 10px 0; font-weight: bold;">${result}</div>
                        <div style="font-size: 1rem; color: #666;">
                            ${winner === 'player' ? 'í”Œë ˆì´ì–´ +1ì , ì»´í“¨í„° -1ì ' : 
                              winner === 'computer' ? 'ì»´í“¨í„° +1ì , í”Œë ˆì´ì–´ -1ì ' : 'ì ìˆ˜ ë³€í™” ì—†ìŒ'}
                        </div>
                    `;
                }
                
                // ì¹´ë“œ ë‹¤ì‹œ ë’¤ì§‘ê¸°
                setTimeout(() => {
                    document.getElementById('player-card-container').classList.remove('flipped');
                    document.getElementById('computer-card-container').classList.remove('flipped');
                    document.getElementById('player-card-value').textContent = '?';
                    document.getElementById('computer-card-value').textContent = '?';
                }, 3000);
            }, 600);
        }

        function resetCard() {
            cardPlayer1Score = 0;
            cardPlayer2Score = 0;
            cardFirstPlayer = 1; // ê²Œì„ ë¦¬ì…‹ ì‹œ í”Œë ˆì´ì–´ 1ë¶€í„° ì‹œì‘
            document.getElementById('card-player1-score').textContent = '0';
            document.getElementById('card-player2-score').textContent = '0';
            document.getElementById('card-result').innerHTML = '';
            startCardGame(); // ìƒˆë¡œìš´ ì¹´ë“œ ê²Œì„ ì‹œì‘
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ê²Œì„ ëª¨ë“œ í™œì„±í™”
        window.onload = function() {
            document.querySelector('.mode-btn').click();
            updateRevealButtonTexts(); // ì´ˆê¸° ë²„íŠ¼ í…ìŠ¤íŠ¸ ì„¤ì •
            startCardGame(); // ì¹´ë“œ ê²Œì„ ì´ˆê¸°í™”
        }
    </script>
</body>
</html>